# Muscle Load Timeline — тепловая карта по времени

## Что это
- Таблица, где строки — мышцы или группы, а колонки — дни, недели или месяцы.
- Цвет показывает, насколько активно работала мышца в выбранном периоде.
- Можно переключать метрику (повторы, вес умноженный на повторы, количество сетов) и тип нормализации.

## Как собираем данные
1. Берем диапазон дат и делим его на одинаковые куски: дни, недели или месяцы — в зависимости от длины периода.
2. Для каждого куска берем тренировки, считаем нагрузку по мышцам (повторы, тоннаж, сеты) и распределяем её по мышцам через проценты из справочника упражнений.
3. Формируем таблицу: каждая строка — мышца/группа, каждая колонка — временной кусок.
4. Сохраняем два массива:
   - `values` — реальные числа (для аналитики и тестов).
   - `values01` — те же числа, сжатые в диапазон 0..1, чтобы UI мог красить клетки.

## Про нормализацию
- **Absolute** — одна шкала для всей таблицы. Видны глобальные пики; хорошо, когда важно увидеть самые загруженные периоды.
- **PerRow** — каждая мышца нормируется отдельно. Легко заметить, что конкретная мышца резко “просела” в конкретной неделе.
- **PerColumn** — каждый период нормализуется отдельно. Помогает понять, кто был главным “героем” конкретного дня/недели.

## Как читать
- Подпись у колонки объясняет даты и сколько тренировок туда попало.
- Чем ярче цвет, тем больше работы сделала мышца в этот период (с учетом выбранной метрики и нормализации).
- Переключайте метрику, чтобы сравнить, например, “много повторов, но легкий вес” против “мало повторов, но тяжелый вес”.

## Примеры сценариев
- **Подготовка к старту.** В начале цикла ноги активно работают, потом нагрузка переходит на верх. В режиме `PerRow` видно, как строка ног тухнет, а спина загорается ярче.
- **Редкие тренировки.** Диапазон за три месяца показывает, что по понедельникам всегда жим, а другие дни пустые. В режиме `PerColumn` легко увидеть “пустые” недели и добавить туда работу.
- **Восстановление после травмы.** Врач просит следить, чтобы левая и правая сторона получали одинаковую нагрузку. Меняем метрику на сеты и смотрим, чтобы строки для нужных групп были одного цвета.
